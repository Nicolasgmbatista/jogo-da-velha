<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Velha Animado</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
  }
  h1 {
    margin-bottom: 20px;
  }
  #game {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 5px;
    position: relative;
  }
  .cell {
    width: 100px;
    height: 100px;
    background-color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5em;
    cursor: pointer;
    border: 2px solid #333;
    position: relative;
  }
  .cell:hover {
    background-color: #e0e0e0;
  }
  .X {
    color: red;
  }
  .O {
    color: blue;
  }
  .win-effect {
    position: absolute;
    font-size: 4em;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    animation: draw 0.8s forwards;
  }
  @keyframes draw {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(-30deg);}
    50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2) rotate(10deg);}
    100% { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0);}
  }
  #message {
    margin-top: 20px;
    font-size: 1.5em;
    opacity: 0;
    animation: fadeIn 1s forwards;
  }
  @keyframes fadeIn {
    0% { opacity: 0; transform: scale(0.5);}
    100% { opacity: 1; transform: scale(1);}
  }
</style>
</head>
<body>

<h1>Jogo da Velha Animado</h1>
<div id="game">
  <div class="cell" data-index="0"></div>
  <div class="cell" data-index="1"></div>
  <div class="cell" data-index="2"></div>
  <div class="cell" data-index="3"></div>
  <div class="cell" data-index="4"></div>
  <div class="cell" data-index="5"></div>
  <div class="cell" data-index="6"></div>
  <div class="cell" data-index="7"></div>
  <div class="cell" data-index="8"></div>
</div>
<div id="message"></div>

<script>
const cells = document.querySelectorAll('.cell');
const message = document.getElementById('message');

let currentPlayer = 'X';
let gameState = ['', '', '', '', '', '', '', '', ''];
let gameActive = true;

const winningConditions = [
  [0,1,2], [3,4,5], [6,7,8],
  [0,3,6], [1,4,7], [2,5,8],
  [0,4,8], [2,4,6]
];

function handleCellClick(e) {
  const index = e.target.getAttribute('data-index');
  if (gameState[index] !== '' || !gameActive) return;

  gameState[index] = currentPlayer;
  e.target.textContent = currentPlayer;
  e.target.classList.add(currentPlayer);

  checkResult();
}

function checkResult() {
  let roundWon = false;

  for (const condition of winningConditions) {
    const [a, b, c] = condition;
    if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
      roundWon = true;
      showWinEffect(currentPlayer);
      break;
    }
  }

  if (roundWon) {
    gameActive = false;
    setTimeout(resetGame, 2000); // reinicia automaticamente apÃ³s 2s
    return;
  }

  if (!gameState.includes('')) {
    message.textContent = 'DEU VELHA!';
    message.style.opacity = 0;
    message.style.animation = 'fadeIn 0.8s forwards';
    gameActive = false;
    setTimeout(resetGame, 2000);
    return;
  }

  currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
}

function resetGame() {
  gameState = ['', '', '', '', '', '', '', '', ''];
  gameActive = true;
  currentPlayer = 'X';
  cells.forEach(cell => {
    cell.textContent = '';
    cell.classList.remove('X', 'O');
  });
  message.textContent = '';
}

function showWinEffect(player) {
  const effect = document.createElement('div');
  effect.classList.add('win-effect');
  effect.textContent = player;
  effect.style.color = player === 'X' ? 'red' : 'blue';
  document.getElementById('game').appendChild(effect);
  setTimeout(() => effect.remove(), 1500);
}

cells.forEach(cell => cell.addEventListener('click', handleCellClick));
</script>

</body>
</html>
